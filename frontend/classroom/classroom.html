<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Paperly - Manage Your Classrooms</title>
    <link rel="stylesheet" href="../common/theme.css">
  <link rel="stylesheet" href="../common/sidebar.css" />
  <link rel="stylesheet" href="classroom.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
  <div class="main-content">
    <header class="page-header">
      <div class="header-content">
        <h1 class="page-title">Manage Your Classrooms</h1>
        <p class="page-subtitle">Create new classrooms or join existing ones</p>
      </div>
    </header>

    <main class="classroom-main">
      <div class="classroom-container">
        <!-- Create Classroom Card -->
        <div class="classroom-card">
          <div class="card-header">
            <div class="card-icon">üè´</div>
            <h2 class="card-title">Create a Classroom</h2>
          </div>
          <form id="createForm" class="classroom-form">
            <div class="form-group">
              <label for="className">Classroom Name</label>
              <input type="text" id="className" placeholder="Enter classroom name" required />
            </div>
            <div class="form-group">
              <label for="classSubject">Subject</label>
              <input type="text" id="classSubject" placeholder="Enter subject" required />
            </div>
            <button class="btn-primary" type="submit">
              <span class="btn-icon">+</span>
              Create Classroom
            </button>
          </form>
        </div>

        <!-- Join Classroom Card -->
        <div class="classroom-card">
          <div class="card-header">
            <div class="card-icon">üîó</div>
            <h2 class="card-title">Join a Classroom</h2>
          </div>
          <form id="joinForm" class="classroom-form">
            <div class="form-group">
              <label for="joinCode">Classroom Code</label>
              <input type="text" id="joinCode" placeholder="Enter classroom code" required />
            </div>
            <button class="btn-secondary" type="submit">
              <span class="btn-icon">‚Üí</span>
              Join Classroom
            </button>
          </form>
        </div>
      </div>

      <!-- Recent Classrooms Section -->
      <div class="recent-section">
        <h3 class="section-title">Recent Classrooms</h3>
        <div class="recent-classrooms" id="recentClassrooms">
          <!-- Recent classrooms will be populated by JavaScript -->
        </div>
      </div>
    </main>
  </div>

  <!-- Classroom View Modal -->
  <div class="modal-overlay" id="classroomViewModal">
    <div class="modal-content large">
      <div class="modal-header">
        <h2 class="modal-title" id="classroomTitle">Classroom Name</h2>
        <button class="modal-close" onclick="closeClassroomView()">&times;</button>
      </div>
      
      <div class="classroom-view-content">
        <div class="classroom-tabs">
          <button class="classroom-tab active" data-tab="overview">Overview</button>
          <button class="classroom-tab" data-tab="resources">Resources</button>
          <button class="classroom-tab" data-tab="members">Members</button>
        </div>
        
        <div class="classroom-tab-content">
          <!-- Overview Tab -->
          <div class="tab-panel active" id="overview">
            <div class="classroom-info">
              <h3>Classroom Information</h3>
              <div class="info-grid">
                <div class="info-item">
                  <span class="info-label">Subject:</span>
                  <span class="info-value" id="classroomSubject">-</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Classroom Code:</span>
                  <span class="info-value" id="classroomCode">-</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Members:</span>
                  <span class="info-value" id="classroomMemberCount">-</span>
                </div>
                <div class="info-item">
                  <span class="info-label">Role:</span>
                  <span class="info-value" id="classroomRole">-</span>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Resources Tab -->
          <div class="tab-panel" id="resources">
            <div class="resources-section">
              <div class="upload-section">
                <h3>Upload Resources</h3>
                <form class="upload-form" id="resourceUploadForm">
                  <div class="upload-area" id="uploadArea">
                    <div class="upload-content">
                      <div class="upload-icon">üìÅ</div>
                      <h4>Drop files here or click to browse</h4>
                      <p>Supported formats: PDF, DOC, DOCX, PPT, PPTX, XLS, XLSX, TXT</p>
                      <input type="file" id="resourceFile" multiple accept=".pdf,.doc,.docx,.ppt,.pptx,.xls,.xlsx,.txt,.jpg,.jpeg,.png,.gif" style="display: none;">
                    </div>
                  </div>
                  
                  <div class="form-group">
                    <label for="resourceTitle">Resource Title</label>
                    <input type="text" id="resourceTitle" placeholder="Enter resource title" required>
                  </div>
                  
                  <div class="form-group">
                    <label for="resourceDescription">Description (Optional)</label>
                    <textarea id="resourceDescription" rows="3" placeholder="Brief description of the resource"></textarea>
                  </div>
                  
                  <button type="submit" class="btn-primary">
                    <span class="btn-icon">üì§</span>
                    Upload Resource
                  </button>
                </form>
              </div>
              
              <div class="resources-list">
                <h3>Available Resources</h3>
                <div class="resources-grid" id="resourcesGrid">
                  <!-- Resources will be populated by JavaScript -->
                </div>
              </div>
            </div>
          </div>
          
          <!-- Members Tab -->
          <div class="tab-panel" id="members">
            <div class="members-section">
              <h3>Classroom Members</h3>
              <div class="members-list" id="membersList">
                <!-- Members will be populated by JavaScript -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Figma-Style File Viewer Modal -->
  <div class="figma-viewer-backdrop" id="chatViewerModal">
    <div class="figma-viewer-container">
      <div class="figma-viewer-header">
        <div class="figma-viewer-title-section">
          <h2 class="figma-viewer-title" id="chatViewerTitle">File Preview</h2>
          <span class="figma-viewer-meta" id="chatViewerMeta"></span>
        </div>
        <button class="figma-viewer-close" id="chatViewerClose" aria-label="Close viewer">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 6L6 18M6 6l12 12"/>
          </svg>
        </button>
      </div>

      <div class="figma-viewer-toolbar">
        <div class="figma-viewer-toolbar-left">
          <button class="figma-viewer-tool-btn" id="chatZoomOut" title="Zoom Out">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
              <path d="M3 9h8v2H3z"/>
            </svg>
          </button>
          <span class="figma-viewer-zoom-level" id="chatZoomLevel">100%</span>
          <button class="figma-viewer-tool-btn" id="chatZoomIn" title="Zoom In">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
              <path d="M9 3v6H3v2h6v6h2v-6h6V9h-6V3z"/>
            </svg>
          </button>
        </div>
        <div class="figma-viewer-toolbar-right">
          <button class="figma-viewer-tool-btn" id="chatFullscreen" title="Fullscreen">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
              <path d="M3 3h5v2H5v3H3V3zm9 0h5v5h-2V5h-3V3zM3 12h2v3h3v2H3v-5zm14 0h2v5h-5v-2h3v-3z"/>
            </svg>
          </button>
        </div>
      </div>

      <div class="figma-viewer-body" id="chatViewerBody">
        <!-- File content will be rendered here -->
      </div>

      <div class="figma-viewer-loading" id="chatViewerLoading">
        <div class="figma-loading-spinner"></div>
        <p>Loading file...</p>
      </div>

      <div class="figma-viewer-error" id="chatViewerError" style="display: none;">
        <div class="figma-error-icon">‚ö†Ô∏è</div>
        <h3>Failed to load file</h3>
        <p id="chatErrorMessage">An error occurred while loading the file.</p>
      </div>
    </div>
  </div>

  <script src="../common/sidebar.js"></script>
  <script src="classroom.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
</body>
</html>